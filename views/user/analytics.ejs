<%- include('partials/dashboardhead') %>
  <main class="md:max-w-full md:ml-64 md:px-2">
    <main class="space-y-10">
      <section id="analytics" class="section mt-16">

        <h2
          class="text-lg md:text-xl fixed py-2 text-center md:text-start w-full bg-gray-800 md:bg-gray-900 font-semibold">
          Analytics & Reports</h2>
        <div class="tradingview-widget-container pt-12 bg-gray-900 ">
          <div class="tradingview-widget-container__widget"></div>
          <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-ticker-tape.js"
            async>
              {
                "symbols": [
                  {
                    "proName": "FOREXCOM:SPXUSD",
                    "title": "S&P 500 Index"
                  },
                  {
                    "proName": "BITSTAMP:BTCUSD",
                    "title": "Bitcoin"
                  },
                  {
                    "proName": "TRADENATION:SOLANA",
                    "title": "Solana"
                  },
                  {
                    "proName": "BITSTAMP:ETHUSD",
                    "title": "Ethereum"
                  },
                  {
                    "proName": "OANDA:XAUUSD",
                    "title": "Gold"
                  },
                  {
                    "proName": "SPARKS:SILVER",
                    "title": "Silver"
                  },
                  {
                    "proName": "TVC:USOIL",
                    "title": "Crude"
                  },
                  {
                    "proName": "VANTAGE:GAS",
                    "title": "Gas"
                  },
                  {
                    "proName": "CAPITALCOM:GASOLINE",
                    "title": "Gasoline"
                  },
                  {
                    "proName": "ACTIVTRADES:SUGARN2025",
                    "title": "Sugar"
                  }
                ],
                  "colorTheme": "dark",
                    "locale": "en",
                      "largeChartUrl": "",
                        "isTransparent": true,
                          "showSymbolLogo": true,
                            "displayMode": "adaptive"
              }
            </script>
        </div>
        <!-- Performance Chart Placeholder -->
        <div class=" h-64 md:h-96 bg-gray-700 pt-8 rounded text-gray- mt-20">
          <canvas id="performanceChart" class="h-64 w-full bg-gray-700 rounded p-4"></canvas>
        </div>

        <!-- Realized & Unrealized PnL -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-6">
          <div class="bg-gray-800 p-4 rounded">
            <h3 class="text-lg font-bold mb-2">Realized PnL</h3>
            <p class="text-green-500">$<%= parseFloat(totalProfit).toFixed(2) %></p>
          </div>
          <div class="bg-gray-800 p-4 rounded">
            <h3 class="text-lg font-bold mb-2">Unrealized PnL</h3>
            <p class="text-red-500">$-<%= parseFloat(totalLoss).toFixed(2) %></p>
          </div>
        </div>

        <!-- Export Buttons -->
        <div class="mt-6 flex gap-4 justify-center">
          <button class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded">Export CSV</button>
          <button class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded">Generate PDF</button>
        </div>
      </section>
    </main>
  </main>
  <script src="/js/userdashboard.js"></script>
  <script src="/js/analytics.js"></script>
  <%- include('partials/footer') %>